@app.route('/login', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        if request.is_json:
            data = request.get_json()
            print(data, '\n\n\n')
            usuario = data.get('f_user')
            contrasena = data.get('f_pwd')
        else:
            usuario = request.form.get('f_user')
            contrasena = request.form.get('f_pwd')
        
        usuario_model = Usuario()
        user = usuario_model.verificar_credenciales(usuario, contrasena)

        if user:
            return jsonify({'redirect': url_for('admin')})
        else:
            return jsonify({'message': 'Usuario o contraseña incorrectos'})

    return render_template('login.html')


    @app.route('/login', methods=['POST'])
    def login():
        if request.method == 'POST':
            usuario = request.form.get('f_user')
            contrasena = request.form.get('f_pwd')
            
            print(f"Usuario recibido: {usuario}, Contraseña recibida: {contrasena}")
    
            # Verificación de credenciales
            usuario_model = Usuario()
            user = usuario_model.verificar_credenciales(usuario, contrasena)
    
            print(f"Verificación de credenciales: {user}")
    
            if user:
                session['admin'] = {'user': usuario, 'pass': contrasena}
                return jsonify({'redirect': url_for('admin')})
            else:
                return jsonify({'message': 'Usuario o contraseña incorrectos'})
        return render_template('login.html')
    


        <link rel="stylesheet" href="{{ url_for('static', filename='css/sweetalert2.min.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
        <script src="https://hcaptcha.com/1/api.js" async defer></script>
    


<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Iniciar Sesión</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sweetalert2.min.css') }}">
    <!-- Otros estilos y scripts necesarios -->
</head>
<body id="LoginForm">
    <div class="container" style="margin-top:70px;">
        <div class="login-form">
            <div class="main-div">
                <div class="panel">
                    <h2>Iniciar Sesión</h2>
                    <p>Por favor escriba su usuario y contraseña</p>
                </div>
                <form id="loginForm" method="post">
                    <div class="row">
                        <label for="f_user">Usuario:</label>
                        <input type="text" class="form-control" id="f_user" name="f_user" placeholder="Usuario">
                    </div>
                    <div class="row">
                        <label for="f_pwd">Contraseña:</label>
                        <input type="password" class="form-control" id="f_pwd" name="f_pwd" placeholder="Contraseña">
                    </div>
                    <div class="row2">
                        <button id="btn_login" class="btn_login" type="submit">Iniciar Sesión</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/sweetalert2.all.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/login.js') }}"></script>
</body>
</html>
